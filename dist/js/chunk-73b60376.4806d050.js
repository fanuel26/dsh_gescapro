(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73b60376"],{bf22:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-card",{staticClass:"widget-1",attrs:{bordered:!1}},[s("a-statistic",{staticClass:"text-success",class:"text-"+e.status,attrs:{title:e.title,value:e.value,prefix:e.prefix,suffix:e.suffix,precision:0,groupSeparator:"."}}),s("div",{staticClass:"icon",domProps:{innerHTML:e._s(e.icon)}})],1)},a=[],o={props:{title:{type:String,default:""},value:{type:Number,default:0},prefix:{type:String,default:""},suffix:{type:String,default:""},icon:{type:String,default:""},status:{type:String,default:"success"}},data(){return{}}},i=o,n=s("2877"),l=Object(n["a"])(i,r,a,!1,null,null,null);t["a"]=l.exports},cce6:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-row",{attrs:{type:"flex",gutter:24}},[s("a-col",{staticClass:"mb-24",attrs:{span:24,md:16}},[s("a-card",{staticClass:"header-solid h-full",attrs:{bordered:!1,bodyStyle:{paddingTop:0,paddingBottom:"16px"}},scopedSlots:e._u([{key:"title",fn:function(){return[s("h6",{staticClass:"font-semibold m-0"},[e._v("Information du superviseur")])]},proxy:!0}])},[s("div",{staticClass:"text-right mb-4"},[s("a-button",{staticClass:"mx-2",on:{click:function(t){return e.$router.go(-1)}}},[e._v("Retour")])],1),s("a-row",{attrs:{gutter:[24,24]}},[s("a-col",{attrs:{span:24}},[s("a-card",{staticClass:"card-billing-info",attrs:{bordered:!1}},[s("div",{staticClass:"col-info"},[s("a-descriptions",{attrs:{title:"date de création: "+new Date(e.superviseur.created_at).toLocaleString(),column:2}},[s("a-descriptions-item",{attrs:{label:"Nom"}},[e._v(" "+e._s(e.superviseur.nom)+" ")]),s("a-descriptions-item",{attrs:{label:"Prenom"}},[e._v(" "+e._s(e.superviseur.prenom)+" ")]),s("a-descriptions-item",{attrs:{label:"Numéro de téléphone"}},[e._v(" (+228) "+e._s(e.superviseur.numero)+" ")]),s("a-descriptions-item"),s("a-descriptions-item",{attrs:{label:"Ville"}},[e._v(" "+e._s(e.ville)+" ")]),s("a-descriptions-item",{attrs:{label:"Quartier"}},[e._v(" "+e._s(e.quartier)+" ")]),s("a-descriptions-item",{attrs:{label:"Code secret"}},[e._v(" "+e._s(e.superviseur.code_secret)+" ")])],1)],1)])],1),s("a-col",{attrs:{span:24}},[s("a-card",{attrs:{bordered:!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("h6",[e._v("Liste des controlles")])]},proxy:!0}])},[s("a-table",{attrs:{columns:e.columns,"data-source":e.data}})],1)],1)],1)],1)],1),s("a-col",{staticClass:"mb-24",attrs:{span:8,md:8}},[s("a-card",{staticClass:"header-solid h-full",attrs:{bordered:!1,bodyStyle:{paddingTop:"16px",paddingBottom:"16px"}}},[[s("h6",{staticClass:"font-semibold m-0"},[e._v("Generer code secret")])],s("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:e.form_code,hideRequiredMark:!0},on:{submit:e.changeCode}},[s("a-form-item",{attrs:{label:"Code secret generer",colon:!1}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code_secret",{initialValue:e.code_secret,rules:[{required:!0,message:"Code secret generer incorrect!"}]}],expression:"[\n                'code_secret',\n                {\n                  initialValue: code_secret,\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Code secret generer incorrect!',\n                    },\n                  ],\n                },\n              ]"}],attrs:{disabled:"",type:"text",placeholder:"Code secret"}})],1),s("div",{staticClass:"mb-4 text-right"},[s("a-button",{staticClass:"login-form-button",attrs:{type:"primary","html-type":"submit"}},[e._v(" Generer ")])],1)],1),[s("h6",{staticClass:"font-semibold m-0"},[e._v("Generer mot de passe")])],s("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:e.form_password,hideRequiredMark:!0},on:{submit:e.passwordSubmit}},[s("a-form-item",{attrs:{label:"Mot de passe generer",colon:!1}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{initialValue:e.password,rules:[{required:!0,message:"Mot de passe generer incorrect!"}]}],expression:"[\n                'password',\n                {\n                  initialValue: password,\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Mot de passe generer incorrect!',\n                    },\n                  ],\n                },\n              ]"}],attrs:{disabled:"",type:"text",placeholder:"Mot de passe"}})],1),s("div",{staticClass:"mb-4 text-right"},[s("a-button",{staticClass:"login-form-button",attrs:{type:"primary","html-type":"submit"}},[e._v(" Generer ")])],1)],1),[s("h6",{staticClass:"font-semibold m-0"},[e._v("Deconnectez le superviseur")])],s("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:e.form_disconnect,hideRequiredMark:!0},on:{submit:e.disconnectSubmit}},[s("a-form-item",{attrs:{label:"Code secret",colon:!1}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code_secret",{rules:[{required:!0,message:"Code secret est vide!"}]}],expression:"[\n                'code_secret',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Code secret est vide!',\n                    },\n                  ],\n                },\n              ]"}],attrs:{type:"text",placeholder:"Code secret"}})],1),s("div",{staticClass:"mb-4 text-right"},[s("a-button",{staticClass:"login-form-button",attrs:{type:"danger","html-type":"submit"}},[e._v(" Deconnexion ")])],1)],1)],2)],1)],1)],1)},a=[],o=s("2f78"),i=s("2e33"),n=s("4072"),l=s("7184"),d=s("6faf"),c=s("bf22"),u={components:{CardCredit:o["a"],WidgetSalary:i["a"],CardPaymentMethods:n["a"],CardBillingInfo:l["a"],CardTransactions:d["a"],WidgetCounter:c["a"]},beforeCreate(){this.form_code=this.$form.createForm(this,{name:"code_secret form"}),this.form_password=this.$form.createForm(this,{name:"password form"}),this.form_disconnect=this.$form.createForm(this,{name:"disconnect form"})},data(){return{callback:"http://dshadmin.gescapro.net/api/auth/admin",namApp:"gescapro",token_admin:null,superviseur:{},superviseurs:null,ville:null,quartier:null,code_secret:null,password:null}},mounted(){this.code_secret=Math.floor(8999*Math.random()+1e3),this.password=`${this.namApp}@${Math.floor(8999*Math.random()+1e3)}`,this.listesuperviseur(),this.detailsuperviseur()},methods:{showAlert(e,t,s){this.$notification[e]({message:t,description:s})},listesuperviseur(){let e=localStorage;this.token_admin=e.getItem("token");let t={headers:{Authorization:this.token_admin}};this.$http.post(this.callback+"/agent/list",{},t).then(e=>{let t=e.body.data;this.superviseurs=t},e=>{this.showAlert("error","Erreur",e.body.message)})},detailsuperviseur(){let e=localStorage;this.token_admin=e.getItem("token");let t={headers:{Authorization:this.token_admin}};this.$http.post(`${this.callback}/agent/info/${this.$route.params.id}`,{},t).then(e=>{let t=e.body.data;this.superviseur=t,this.ville=t.quartier.ville.libelle,this.quartier=t.quartier.libelle},e=>{this.showAlert("error","Erreur",e.body.message)})},changeCode(e){e.preventDefault(),this.form_code.validateFields((e,t)=>{if(e)console.log(e);else{let e=localStorage;this.token_admin=e.getItem("token");let s={headers:{Authorization:this.token_admin}},r={code_secret:this.superviseur.code_secret,newcode_secret:t.code_secret};this.$http.post(`${this.callback}/agent/${this.$route.params.id}/code/change`,r,s).then(e=>{let s=e.body;1==s.status?(this.showAlert("success","Success","Code secret générer avec success! Code secret: "+t.code_secret),this.detailsuperviseur(),this.code_secret=Math.floor(8999*Math.random()+1e3)):this.showAlert("danger","Erreur",s.message)},e=>{this.showAlert("danger","Erreur",e.body.message)})}})},passwordSubmit(e){e.preventDefault(),this.form_password.validateFields((e,t)=>{if(e)console.log("error");else{let e=localStorage;this.token_admin=e.getItem("token");let s={headers:{Authorization:this.token_admin}};this.$http.post(`${this.callback}/agent/${this.$route.params.id}/password/change/token`,{},s).then(e=>{let s=e.body.data,r=s,a={headers:{Authorization:r}},o={newpassword:t.password};this.$http.post(`${this.callback}/agent/${this.$route.params.id}/password/change/operation`,o,a).then(e=>{let s=e.body;1==s.status?(this.showAlert("success","Success","Mot de passe generer avec succes! Mot de passe: "+t.password),this.password=`${this.namApp}@${Math.floor(8999*Math.random()+1e3)}`):this.showAlert("error","Erreur",s.message)},e=>{this.showAlert("error","Erreur",e.body.message)})},e=>{this.showAlert("error","Erreur",e.body.message)})}})},disconnectSubmit(e){e.preventDefault(),this.form_disconnect.validateFields((e,t)=>{if(!e)if(t.code_secret==localStorage.getItem("code_secret")){let e=localStorage;this.token_admin=e.getItem("token");let t={headers:{Authorization:this.token_admin}};this.$http.post(`${this.callback}/agent/disconnect/${this.$route.params.id}`,{},t).then(e=>{let t=e.body;t&&this.showAlert("success","Success","Agent superviseur deconneter avec success")},e=>{this.showAlert("error","Erreur",e.body.message)})}else this.showAlert("error","Erreur","Code secret incorrect")})},handleSubmit(){}}},m=u,h=s("2877"),p=Object(h["a"])(m,r,a,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-73b60376.4806d050.js.map